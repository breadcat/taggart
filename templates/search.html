{{template "_header" .}}
<h1>Search Files</h1>

{{if .Files}}
    <h2>Found {{len .Files}} file{{if ne (len .Files) 1}}s{{end}}</h2>
    <div class="file-grid">
        {{range .Files}}
        <div class="file-item">
            <a href="/file/{{.ID}}">{{.Filename}}</a>
            {{if hasAnySuffix .Filename ".jpg" ".jpeg" ".png" ".gif" ".webp"}}
                <br><img src="/uploads/{{.EscapedFilename}}" style="max-width: 100%; height: auto;" />
            {{end}}
        </div>
        {{end}}
    </div>
{{else if .Query}}
    <p>No files found matching "<strong>{{.Query}}</strong>"</p>
    <p>Try using wildcards like <code>*{{.Query}}*</code> for broader results.</p>
{{end}}

{{template "_footer"}}