{{template "_header" .}}
<h1>Settings</h1>

{{if .Data.Error}}
<div style="background-color: #f8d7da; color: #721c24; padding: 10px; border: 1px solid #f5c6cb; border-radius: 4px; margin-bottom: 20px;">
    <strong>Error:</strong> {{.Data.Error}}
</div>
{{end}}

{{if .Data.Success}}
<div style="background-color: #d4edda; color: #155724; padding: 10px; border: 1px solid #c3e6cb; border-radius: 4px; margin-bottom: 20px;">
    <strong>Success:</strong> {{.Data.Success}}
</div>
{{end}}

<form method="post" style="max-width: 600px;">
    <div style="margin-bottom: 20px;">
        <label for="database_path" style="display: block; font-weight: bold; margin-bottom: 5px;">Database Path:</label>
        <input type="text" id="database_path" name="database_path" value="{{.Data.Config.DatabasePath}}" required
               style="width: 100%; padding: 8px; font-size: 14px;"
               placeholder="./database.db">
        <small style="color: #666;">Path to SQLite database file (requires restart if changed)</small>
    </div>

    <div style="margin-bottom: 20px;">
        <label for="upload_dir" style="display: block; font-weight: bold; margin-bottom: 5px;">Upload Directory:</label>
        <input type="text" id="upload_dir" name="upload_dir" value="{{.Data.Config.UploadDir}}" required
               style="width: 100%; padding: 8px; font-size: 14px;"
               placeholder="uploads">
        <small style="color: #666;">Directory where uploaded files are stored</small>
    </div>

    <div style="margin-bottom: 20px;">
        <label for="server_port" style="display: block; font-weight: bold; margin-bottom: 5px;">Server Port:</label>
        <input type="text" id="server_port" name="server_port" value="{{.Data.Config.ServerPort}}" required
               style="width: 100%; padding: 8px; font-size: 14px;"
               placeholder=":8080">
        <small style="color: #666;">Port for web server (format: :8080, requires restart if changed)</small>
    </div>

    <div style="margin-bottom: 20px;">
        <label for="instance_name" style="display: block; font-weight: bold; margin-bottom: 5px;">Instance Name:</label>
        <input type="text" id="instance_name" name="instance_name" value="{{.Data.Config.InstanceName}}" required
               style="width: 100%; padding: 8px; font-size: 14px;"
               placeholder=":8080">
        <small style="color: #666;">Instance Name, used in header and title bar</small>
    </div>

    <div style="margin-bottom: 20px;">
        <label for="gallery_size" style="display: block; font-weight: bold; margin-bottom: 5px;">Gallery Size:</label>
        <input type="text" id="gallery_size" name="gallery_size" value="{{.Data.Config.GallerySize}}" required
               style="width: 100%; padding: 8px; font-size: 14px;"
               placeholder=":8080">
        <small style="color: #666;">Size of previews used in galleries</small>
    </div>

    <div style="margin-bottom: 20px;">
        <label for="items_per_page" style="display: block; font-weight: bold; margin-bottom: 5px;">Items per Page:</label>
        <input type="text" id="items_per_page" name="items_per_page" value="{{.Data.Config.ItemsPerPage}}" required
               style="width: 100%; padding: 8px; font-size: 14px;"
               placeholder=":8080">
        <small style="color: #666;">Items per page in galleries</small>
    </div>

    <button type="submit" style="background-color: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; font-size: 16px;">
        Save Settings
    </button>
</form>

<div style="margin-top: 40px; padding: 20px; background-color: #f8f9fa; border-radius: 5px;">
    <h3>Current Configuration:</h3>
    <ul>
        <li><strong>Database:</strong> {{.Data.Config.DatabasePath}}</li>
        <li><strong>Upload Directory:</strong> {{.Data.Config.UploadDir}}</li>
        <li><strong>Server Port:</strong> {{.Data.Config.ServerPort}}</li>
        <li><strong>Instance Name:</strong> {{.Data.Config.InstanceName}}</li>
        <li><strong>Gallery Size:</strong> {{.Data.Config.GallerySize}}</li>
        <li><strong>Items per Page:</strong> {{.Data.Config.ItemsPerPage}}</li>
    </ul>

    <h4>Configuration File:</h4>
    <p>Settings are stored in <code>config.json</code> in the application directory.</p>
</div>

{{template "_footer"}}